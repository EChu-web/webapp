require './about.less' 

React = require 'react'

Actions = require '../flux/actions/actions'
Data = require '../flux/stores/data'

About = React.createClass
	getInitialState: ->
		ready: no

	componentDidMount: ->		
		Actions.get_settings()

		@off = Data.on 'settings_changed', =>
			@setState
				putin: Data.settings.putin,
				version: Data.settings.version
				ready: yes

	componentWillUnmount: ->
		@off()

	render: ->
		content = if @state.ready
			<div>
				<div>Putin: {@state.putin}</div>
				<div>Version: {@state.version}</div>
			</div>
		else
			<div>
				Loading...
			</div>

		(
			<div>
				{content}
				<div>Copyright Â© 2015</div>
			</div>
		)

module.exports = About